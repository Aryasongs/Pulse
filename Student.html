<!doctype doctype>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oriontec Nova Go AI - Student Registration</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    html {
      height: 100%;
    }

    .container {
      width: 90%;
      max-width: 500px;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 40px;
      margin: 20px;
    }

    .logo-section {
      text-align: center;
      margin-bottom: 30px;
    }

    .logo {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
    }

    h1 {
      color: #2d3748;
      font-size: 28px;
      margin: 0 0 10px 0;
      font-weight: 700;
    }

    .subtitle {
      color: #718096;
      font-size: 16px;
      margin: 0 0 30px 0;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      color: #2d3748;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
    }

    select, input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 15px;
      transition: all 0.3s ease;
      box-sizing: border-box;
      font-family: inherit;
    }

    select:focus, input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    select {
      cursor: pointer;
      background-color: white;
    }

    .google-btn {
      width: 100%;
      padding: 14px;
      background: white;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      color: #2d3748;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .google-btn:hover {
      background: #f7fafc;
      border-color: #cbd5e0;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .google-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .submit-btn {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      border-radius: 10px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .submit-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }

    .submit-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .hidden {
      display: none;
    }

    .user-info {
      background: #f7fafc;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .user-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
    }

    .user-details {
      flex: 1;
    }

    .user-name {
      font-weight: 600;
      color: #2d3748;
      margin: 0 0 4px 0;
    }

    .user-email {
      font-size: 13px;
      color: #718096;
      margin: 0;
    }

    .error-message {
      background: #fed7d7;
      color: #c53030;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 14px;
      display: none;
    }

    .loading {
      text-align: center;
      color: #667eea;
      font-weight: 600;
      padding: 20px;
    }

    .spinner {
      border: 3px solid #e2e8f0;
      border-top: 3px solid #667eea;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 0 auto 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container">
   <div class="logo-section">
    <div class="logo">
     ðŸš€
    </div>
    <h1 id="main-title">Oriontec Nova Go AI</h1>
    <p class="subtitle" id="subtitle">Free AI for Students - Register Now</p>
   </div>
   <div class="error-message" id="error-message"></div>
   <div id="login-section"><button class="google-btn" id="google-login-btn">
     <svg width="20" height="20" viewbox="0 0 20 20"><path fill="#4285F4" d="M19.6 10.23c0-.82-.1-1.42-.25-2.05H10v3.72h5.5c-.15.96-.74 2.31-2.04 3.22v2.45h3.16c1.89-1.73 2.98-4.3 2.98-7.34z" /> <path fill="#34A853" d="M13.46 15.13c-.83.59-1.96 1-3.46 1-2.64 0-4.88-1.74-5.68-4.15H1.07v2.52C2.72 17.75 6.09 20 10 20c2.7 0 4.96-.89 6.62-2.42l-3.16-2.45z" /> <path fill="#FBBC05" d="M3.99 10c0-.69.12-1.35.32-1.97V5.51H1.07A9.973 9.973 0 000 10c0 1.61.39 3.14 1.07 4.49l3.24-2.52c-.2-.62-.32-1.28-.32-1.97z" /> <path fill="#EA4335" d="M10 3.88c1.88 0 3.13.81 3.85 1.48l2.84-2.76C14.96.99 12.7 0 10 0 6.09 0 2.72 2.25 1.07 5.51l3.24 2.52C5.12 5.62 7.36 3.88 10 3.88z" />
     </svg> Sign in with Google </button>
   </div>
   <div id="user-info-section" class="hidden"></div>
   <form id="registration-form" class="hidden">
    <div class="form-group"><label for="state">Select Your State</label> <select id="state" required> <option value="">Choose State</option> <option value="Andhra Pradesh">Andhra Pradesh</option> <option value="Arunachal Pradesh">Arunachal Pradesh</option> <option value="Assam">Assam</option> <option value="Bihar">Bihar</option> <option value="Chhattisgarh">Chhattisgarh</option> <option value="Goa">Goa</option> <option value="Gujarat">Gujarat</option> <option value="Haryana">Haryana</option> <option value="Himachal Pradesh">Himachal Pradesh</option> <option value="Jharkhand">Jharkhand</option> <option value="Karnataka">Karnataka</option> <option value="Kerala">Kerala</option> <option value="Madhya Pradesh">Madhya Pradesh</option> <option value="Maharashtra">Maharashtra</option> <option value="Manipur">Manipur</option> <option value="Meghalaya">Meghalaya</option> <option value="Mizoram">Mizoram</option> <option value="Nagaland">Nagaland</option> <option value="Odisha">Odisha</option> <option value="Punjab">Punjab</option> <option value="Rajasthan">Rajasthan</option> <option value="Sikkim">Sikkim</option> <option value="Tamil Nadu">Tamil Nadu</option> <option value="Telangana">Telangana</option> <option value="Tripura">Tripura</option> <option value="Uttar Pradesh">Uttar Pradesh</option> <option value="Uttarakhand">Uttarakhand</option> <option value="West Bengal">West Bengal</option> </select>
    </div>
    <div class="form-group hidden" id="university-group"><label for="university">Select Your University</label> <select id="university"> <option value="">Choose University</option> <option value="Guru Nanak Dev University, Amritsar">Guru Nanak Dev University, Amritsar</option> <option value="Punjabi University, Patiala">Punjabi University, Patiala</option> <option value="Punjab Agricultural University, Ludhiana">Punjab Agricultural University, Ludhiana</option> <option value="Chitkara University, Rajpura">Chitkara University, Rajpura</option> <option value="Lovely Professional University, Jalandhar">Lovely Professional University, Jalandhar</option> <option value="Central University of Punjab, Bathinda">Central University of Punjab, Bathinda</option> <option value="KC College of Engineering &amp; Information Technology, Nawanshahr">KC College of Engineering &amp; Information Technology, Nawanshahr</option> </select>
    </div>
    <div class="form-group"><label for="name">Full Name</label> <input type="text" id="name" placeholder="Enter your full name" required>
    </div>
    <div class="form-group"><label for="age">Age</label> <input type="number" id="age" placeholder="Enter your age" min="16" max="100" required>
    </div>
    <div class="form-group"><label for="email">Email ID</label> <input type="email" id="email" placeholder="Enter your email" required>
    </div>
    <div class="form-group"><label for="phone">Phone Number</label> <input type="tel" id="phone" placeholder="Enter your phone number" required>
    </div>
    <div class="form-group"><label for="city">City</label> <input type="text" id="city" placeholder="Enter your city" required>
    </div><button type="submit" class="submit-btn" id="submit-btn"> <span id="button-text">Complete Registration</span> </button>
   </form>
   <div id="loading-section" class="hidden">
    <div class="spinner"></div>
    <div class="loading">
     Processing your registration...
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      main_title: "Oriontec Nova Go AI",
      subtitle: "Free AI for Students - Register Now",
      button_text: "Complete Registration"
    };

    const firebaseConfig = {
      apiKey: "AIzaSyC30TcmMVhP_8HdFYS1WufRiZwSDYNMTF0",
      authDomain: "pulse2-92372.firebaseapp.com",
      databaseURL: "https://pulse2-92372-default-rtdb.firebaseio.com",
      projectId: "pulse2-92372",
      storageBucket: "pulse2-92372.firebasestorage.app",
      messagingSenderId: "276235725177",
      appId: "1:276235725177:web:0f4e0789fae80a435927a8"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const database = firebase.database();

    let currentUser = null;

    const elements = {
      loginSection: document.getElementById('login-section'),
      userInfoSection: document.getElementById('user-info-section'),
      registrationForm: document.getElementById('registration-form'),
      loadingSection: document.getElementById('loading-section'),
      googleLoginBtn: document.getElementById('google-login-btn'),
      stateSelect: document.getElementById('state'),
      universityGroup: document.getElementById('university-group'),
      universitySelect: document.getElementById('university'),
      errorMessage: document.getElementById('error-message'),
      submitBtn: document.getElementById('submit-btn'),
      mainTitle: document.getElementById('main-title'),
      subtitle: document.getElementById('subtitle'),
      buttonText: document.getElementById('button-text')
    };

    function showError(message) {
      elements.errorMessage.textContent = message;
      elements.errorMessage.style.display = 'block';
      setTimeout(() => {
        elements.errorMessage.style.display = 'none';
      }, 5000);
    }

    elements.googleLoginBtn.addEventListener('click', async () => {
      try {
        elements.googleLoginBtn.disabled = true;
        const provider = new firebase.auth.GoogleAuthProvider();
        const result = await auth.signInWithPopup(provider);
        currentUser = result.user;
        
        elements.loginSection.classList.add('hidden');
        
        elements.userInfoSection.innerHTML = `
          <div class="user-info">
            <img src="${currentUser.photoURL}" alt="User Avatar" class="user-avatar">
            <div class="user-details">
              <p class="user-name">${currentUser.displayName}</p>
              <p class="user-email">${currentUser.email}</p>
            </div>
          </div>
        `;
        elements.userInfoSection.classList.remove('hidden');
        
        elements.registrationForm.classList.remove('hidden');
        document.getElementById('email').value = currentUser.email;
        
      } catch (error) {
        showError('Failed to sign in with Google. Please try again.');
        elements.googleLoginBtn.disabled = false;
      }
    });

    elements.stateSelect.addEventListener('change', (e) => {
      if (e.target.value === 'Punjab') {
        elements.universityGroup.classList.remove('hidden');
        elements.universitySelect.required = true;
      } else {
        elements.universityGroup.classList.add('hidden');
        elements.universitySelect.required = false;
        elements.universitySelect.value = '';
      }
    });

    elements.registrationForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      if (!currentUser) {
        showError('Please sign in with Google first.');
        return;
      }

      const state = elements.stateSelect.value;
      const university = state === 'Punjab' ? elements.universitySelect.value : 'N/A';
      
      if (state === 'Punjab' && !university) {
        showError('Please select your university.');
        return;
      }

      const formData = {
        uid: currentUser.uid,
        googleEmail: currentUser.email,
        googleName: currentUser.displayName,
        state: state,
        university: university,
        name: document.getElementById('name').value,
        age: document.getElementById('age').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        city: document.getElementById('city').value,
        registeredAt: new Date().toISOString()
      };

      elements.registrationForm.classList.add('hidden');
      elements.loadingSection.classList.remove('hidden');

      try {
        await database.ref('students/' + currentUser.uid).set(formData);
        
        setTimeout(() => {
          window.open('https://pulse.oriontec.xyz/NovaGO.html', '_blank', 'noopener,noreferrer');
        }, 1500);
        
      } catch (error) {
        elements.loadingSection.classList.add('hidden');
        elements.registrationForm.classList.remove('hidden');
        showError('Failed to save registration. Please try again.');
      }
    });

    async function onConfigChange(config) {
      elements.mainTitle.textContent = config.main_title || defaultConfig.main_title;
      elements.subtitle.textContent = config.subtitle || defaultConfig.subtitle;
      elements.buttonText.textContent = config.button_text || defaultConfig.button_text;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig: defaultConfig,
        onConfigChange: onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ["main_title", config.main_title || defaultConfig.main_title],
          ["subtitle", config.subtitle || defaultConfig.subtitle],
          ["button_text", config.button_text || defaultConfig.button_text]
        ])
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'996a4bb885411c49',t:'MTc2MTgyMDg0MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
