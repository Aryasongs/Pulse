<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>DCloud Full</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
html,body{margin:0;padding:0;width:100%;height:100%;font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background: linear-gradient(180deg,#f5f7fa,#e8ebee);overflow-x:hidden;user-select:none;}
header{height:60px;width:100%;background:#fff;box-shadow:0 2px 5px rgba(0,0,0,0.05);display:flex;align-items:center;justify-content:space-between;padding:0 20px;font-weight:600;}
.sidebar{position:fixed;top:60px;left:0;width:60px;height:calc(100% - 60px);background:#fff;display:flex;flex-direction:column;align-items:center;box-shadow:2px 0 5px rgba(0,0,0,0.05);padding-top:20px;transition:0.3s;}
.sidebar i{font-size:1.5em;margin:20px 0;color:#666;cursor:pointer;transition:0.2s;}
.sidebar i:hover{color:#1a73e8;}
.container{margin-left:80px;padding:20px;transition:0.3s;}
.card{background:#fff;border-radius:20px;box-shadow:0 10px 15px rgba(0,0,0,0.05);padding:20px;margin-bottom:20px;transition:0.2s;}
.card:hover{transform:translateY(-5px);box-shadow:0 15px 20px rgba(0,0,0,0.08);}
.fab{position:fixed;bottom:30px;right:30px;background:#1a73e8;color:#fff;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2em;cursor:pointer;box-shadow:0 10px 15px rgba(0,0,0,0.2);transition:0.2s;}
.fab:hover{transform:scale(1.1);box-shadow:0 15px 20px rgba(0,0,0,0.25);}
.modal{position:fixed;top:0;left:0;right:0;bottom:0;display:none;justify-content:center;align-items:center;backdrop-filter: blur(6px);}
.modal-content{background:#fff;padding:20px;border-radius:20px;width:90%;max-width:400px;text-align:center;box-shadow:0 10px 20px rgba(0,0,0,0.2);animation:fadeIn 0.3s ease;}
@keyframes fadeIn{from{opacity:0;transform:translateY(-10px);}to{opacity:1;transform:translateY(0);}}
.progress-bar{width:100%;background:#e0e0e0;border-radius:12px;overflow:hidden;height:12px;margin-top:5px;}
.progress{height:100%;width:0%;background:#1a73e8;border-radius:12px;transition:width 0.3s ease;}
.copy-btn{margin-top:10px;padding:8px 12px;border:none;background:#1a73e8;color:#fff;border-radius:12px;cursor:pointer;transition:0.2s;}
.copy-btn:hover{background:#155ab6;}
.tooltip{display:none;font-size:0.85em;color:#1a73e8;margin-top:5px;}
.drag-area{border:2px dashed #ccc;border-radius:15px;padding:20px;text-align:center;cursor:pointer;transition:0.2s;}
.drag-area.dragover{border-color:#1a73e8;background:rgba(26,115,232,0.05);}
.dark-mode{background:#1c1c1e;color:#fff;}
.dark-mode .card{background:#2c2c2e;box-shadow:0 10px 15px rgba(255,255,255,0.05);}
.dark-mode header{background:#2c2c2e;box-shadow:0 2px 5px rgba(255,255,255,0.05);}
.dark-mode .sidebar{background:#2c2c2e;box-shadow:2px 0 5px rgba(255,255,255,0.05);}
</style>
</head>
<body>

<header>
  <span>DCloud</span>
  <i class="fas fa-moon" id="themeToggle" style="cursor:pointer;"></i>
</header>

<div class="sidebar">
  <i class="fas fa-sticky-note" title="Notes" data-section="notes"></i>
  <i class="fas fa-image" title="Images/Files" data-section="files"></i>
  <i class="fas fa-calendar" title="Calendar" data-section="calendar"></i>
  <i class="fas fa-map-marker-alt" title="Maps" data-section="maps"></i>
  <i class="fas fa-cog" title="Settings" data-section="settings"></i>
</div>

<div class="container" id="dashboard">
  <!-- Notes Section -->
  <div class="card section" id="notesSection">
    <h3>Notes</h3>
    <textarea id="noteContent" placeholder="Write your note..." rows="5" style="width:100%;border-radius:12px;padding:10px;border:1px solid #ccc;"></textarea>
    <input type="text" id="notePassword" placeholder="Optional password" style="width:100%;margin-top:10px;padding:10px;border-radius:12px;border:1px solid #ccc;">
    <select id="noteCategory" style="margin-top:10px;width:100%;padding:10px;border-radius:12px;border:1px solid #ccc;">
      <option value="Work">Work</option>
      <option value="Personal">Personal</option>
      <option value="Ideas">Ideas</option>
    </select>
    <button class="copy-btn" id="saveNoteBtn">Save Note</button>
    <input type="text" id="searchNotes" placeholder="Search notes..." style="width:100%;margin-top:10px;padding:10px;border-radius:12px;border:1px solid #ccc;">
    <div id="notesList" style="margin-top:10px;"></div>
  </div>

  <!-- Files Section -->
  <div class="card section" id="filesSection" style="display:none;">
    <h3>Images / Files</h3>
    <div class="drag-area" id="dragArea">Drag & drop or click to upload</div>
  </div>

  <!-- Calendar Section -->
  <div class="card section" id="calendarSection" style="display:none;">
    <h3>Calendar</h3>
    <p>Calendar events and reminders go here.</p>
  </div>

  <!-- Maps Section -->
  <div class="card section" id="mapsSection" style="display:none;">
    <h3>Maps</h3>
    <p>Saved locations and map clustering go here.</p>
  </div>

  <!-- Settings Section -->
  <div class="card section" id="settingsSection" style="display:none;">
    <h3>Settings</h3>
    <input type="text" id="pscode" readonly value="ABCD1234EFGH5678" style="width:100%;padding:10px;border-radius:12px;border:1px solid #ccc;">
    <button class="copy-btn" id="copyPSBtn">Copy PS Code</button>
    <div class="tooltip" id="psTooltip">Copied!</div>
    <p style="margin-top:10px;">Profile editing, MPIN, About & account deletion will appear here.</p>
  </div>
</div>

<div class="fab" id="fab">+</div>

<div class="modal" id="confirmationModal">
  <div class="modal-content" id="modalContent">Action successful!</div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
// Firebase
const firebaseConfig={
  apiKey:"AIzaSyC30TcmMVhP_8HdFYS1WufRiZwSDYNMTF0",
  authDomain:"pulse2-92372.firebaseapp.com",
  databaseURL:"https://pulse2-92372-default-rtdb.firebaseio.com",
  projectId:"pulse2-92372",
  storageBucket:"pulse2-92372.firebasestorage.app",
  messagingSenderId:"276235725177",
  appId:"1:276235725177:web:0f4e0789fae80a435927a8"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();

// --- Sidebar navigation ---
document.querySelectorAll('.sidebar i').forEach(icon=>{
  icon.addEventListener('click',()=>{  
    document.querySelectorAll('.section').forEach(s=>s.style.display='none');
    const sec=document.getElementById(icon.dataset.section+'Section');
    if(sec) sec.style.display='block';
  });
});

// --- Notes Save & Encrypt ---
document.getElementById('saveNoteBtn').addEventListener('click',()=>{
  const content=document.getElementById('noteContent').value.trim();
  if(!content)return alert("Write something!");
  const password=document.getElementById('notePassword').value;
  const category=document.getElementById('noteCategory').value;
  const noteId='note-'+Date.now();
  const encrypted=CryptoJS.AES.encrypt(content,password||'dcloud').toString();
  db.ref('notes/'+noteId).set({content:encrypted,password,category,timestamp:Date.now()});
  localStorage.setItem(noteId,encrypted);
  showModal("Note saved!");
  const shareUrl=`https://pulse.oriontec.xyz/dcloud.html#${noteId}`;
  prompt("Share URL:",shareUrl);
  document.getElementById('noteContent').value='';
  document.getElementById('notePassword').value='';
});

// --- PS Code Copy ---
document.getElementById('copyPSBtn').addEventListener('click',()=>{
  const pscode=document.getElementById('pscode');pscode.select();
  document.execCommand("copy");
  const tooltip=document.getElementById('psTooltip');tooltip.style.display='block';
  setTimeout(()=>{tooltip.style.display='none';},1000);
});

// --- Drag & Drop Files ---
const dragArea=document.getElementById('dragArea');
dragArea.addEventListener('dragover',e=>{e.preventDefault();dragArea.classList.add('dragover');});
dragArea.addEventListener('dragleave',e=>{dragArea.classList.remove('dragover');});
dragArea.addEventListener('drop',e=>{e.preventDefault();dragArea.classList.remove('dragover');
  Array.from(e.dataTransfer.files).forEach(file=>{
    const reader=new FileReader();
    reader.onload=()=>{const id='file-'+Date.now();db.ref('files/'+id).set({data:reader.result,name:file.name});localStorage.setItem(id,reader.result);showModal("File uploaded!");};
    reader.readAsDataURL(file);
  });
});

// --- Modal ---
function showModal(text){const modal=document.getElementById('confirmationModal');document.getElementById('modalContent').innerText=text;modal.style.display='flex';setTimeout(()=>{modal.style.display='none';},1500);}

// --- Dark/Light mode ---
document.getElementById('themeToggle').addEventListener('click',()=>{document.body.classList.toggle('dark-mode');});

</script>
</body>
</html>
