<!-- File input (hidden) -->
<input type="file" id="buzzVideoInput" accept="video/*" class="hidden">

<!-- Upload button -->
<button id="addVideo" class="touch-target hover:bg-gray-100 rounded-full p-2">
  ðŸŽ¥ Upload Video
</button>

<!-- Feed section -->
<div id="feed"></div>

<script>
  const cloudName = "dzjlmmcj";      // Apna Cloudinary Cloud Name
  const uploadPreset = "Pulsvideos"; // Apna Upload Preset Name

  // Button click -> open file picker
  document.getElementById("addVideo").addEventListener("click", () => {
    document.getElementById("buzzVideoInput").click();
  });

  // File selected -> upload to Cloudinary
  document.getElementById("buzzVideoInput").addEventListener("change", async (e) => {
    const file = e.target.files[0];
    if (!file) return;

    const formData = new FormData();
    formData.append("file", file);
    formData.append("upload_preset", uploadPreset);

    // âœ… Video upload API endpoint
    const res = await fetch(`https://api.cloudinary.com/v1_1/${cloudName}/video/upload`, {
      method: "POST",
      body: formData
    });

    const data = await res.json();
    console.log("Uploaded Video URL:", data.secure_url);

    // Show video in feed
    const videoEl = document.createElement("video");
    videoEl.src = data.secure_url;
    videoEl.controls = true;
    videoEl.className = "w-full rounded-lg mt-3";
    document.getElementById("feed").prepend(videoEl);
  });
</script>
